# Exploit PoC

We know that when we access the page /resources, it is likely to request credentials from us. Once we access the page, we will then be able to upload files, however, the file type will be filtered to prevent uploading anything we want. We also know that we can bypass these filters, so let's begin

If we go back to when we first used mimikatz on the gitserver, we remember we got a password that may be of use here. It's likely that the username is something we have seen before in the system like **Thomas** or **twreath**. Using the credentials **thomas:i<3ruby** we can access the file upload page that Thomas has setup

Now we need to get to work on our payload. To begin with, we know that 1 of the filters looks for file type. We can bypass this by renaming our file to **test-gnome787.jpeg.php**, this will execute the file as a php script but still make it appear as a jpef. The other filter, works by using the **getimagesize()** function which checks for attributes only an image will have. Therefore we must give it an image and somehow hide our php payload inside this image. This can be done with a tool named **exiftool**, which will allow us to add some php code into the **exifdata**

First we want to install exiftool if we don't already have it: **sudo apt install exiftool**. From there we can check the exifdata of our image file by doing **exiftool IMAGENAME**

Now we can use this tool to hide our php code, in our case we will put it in the comments section. This can be done by doing **exiftool -Comment="<?php echo \"<pre>Test Payload</pre>\"; die(); ?>" test-gnome787.jpeg.php**

Now if we run **exiftool test-gnome787.jpeg.php** again, we see there is a line that reads **Comment** which contains our php testing code

From there we upload our modified image to the server and access it in the directory **/resources/uplaods** followed by our file name

